MVCC复杂模式测试
=======================

初始合约状态: 地址=0x1234567890123456789012345678901234567890, 键=0x0000000000000000000000000000000000000000000000000000000000000001, 值=100

启动4个工作线程执行8个交易
交易类型: 偶数索引为写操作，奇数索引为读操作

交易执行结果:
交易 0 (线程 1):
  类型: write
  开始时间: 15:41:15.647270
  结束时间: 15:41:15.668417
  读取值: 100
  写入值: 1000
  执行成功: true
  执行时间: 21 ms
交易 1 (线程 3):
  类型: read
  开始时间: 15:41:15.647270
  结束时间: 15:41:15.653306
  读取值: 100
  执行成功: true
  执行时间: 6 ms
交易 2 (线程 4):
  类型: write
  开始时间: 15:41:15.647270
  结束时间: 15:41:15.668417
  读取值: 100
  写入值: 1002
  执行成功: true
  执行时间: 21 ms
交易 3 (线程 2):
  类型: read
  开始时间: 15:41:15.647270
  结束时间: 15:41:15.653306
  读取值: 100
  执行成功: true
  执行时间: 6 ms
交易 4 (线程 2):
  类型: write
  开始时间: 15:41:15.668417
  结束时间: 15:41:15.683511
  读取值: 100
  写入值: 1004
  执行成功: false
  执行时间: 15 ms
交易 5 (线程 3):
  类型: read
  开始时间: 15:41:15.668417
  结束时间: 15:41:15.683511
  读取值: 1002
  执行成功: true
  执行时间: 15 ms
交易 6 (线程 1):
  类型: write
  开始时间: 15:41:15.683511
  结束时间: 15:41:15.699137
  读取值: 1000
  写入值: 1006
  执行成功: true
  执行时间: 15 ms
交易 7 (线程 4):
  类型: read
  开始时间: 15:41:15.683511
  结束时间: 15:41:15.699137
  读取值: 1000
  执行成功: true
  执行时间: 15 ms

多版本状态表内容:
  版本数量: 3
  版本 0:
    交易索引: 2
    值: 1002
    是否已中止: false
    读取此版本的交易: 5 
  版本 1:
    交易索引: 0
    值: 1000
    是否已中止: false
    读取此版本的交易: 7 6 
  版本 2:
    交易索引: 6
    值: 1006
    是否已中止: false
    读取此版本的交易: 无

中止的交易分析:
中止的交易列表: [3 4 2 5 1 7]

中止原因分析:
交易 3 中止原因分析:
  - 交易类型: read
  - 执行时间: 15:41:15.647270
  - 读取的值: 100
  - 可能的中止原因:
    * 交易 0 在此交易执行期间写入了新值 1000
    * 交易 2 在此交易执行期间写入了新值 1002
    * 读取了交易 0 的旧版本，但该版本已被交易 2 覆盖
    * 依赖的交易 2 被中止
    * 依赖的交易 1 被中止
交易 4 中止原因分析:
  - 交易类型: write
  - 执行时间: 15:41:15.668417
  - 读取的值: 100
  - 尝试写入的值: 1004
  - 可能的中止原因:
    * 交易 0 在此交易执行期间写入了新值 1000
    * 交易 2 在此交易执行期间写入了新值 1002
    * 读取了交易 0 的旧版本，但该版本已被交易 2 覆盖
    * 依赖的交易 3 被中止
    * 依赖的交易 2 被中止
    * 依赖的交易 1 被中止
交易 2 中止原因分析:
  - 交易类型: write
  - 执行时间: 15:41:15.647270
  - 读取的值: 100
  - 尝试写入的值: 1002
  - 可能的中止原因:
    * 交易 0 在此交易执行期间写入了新值 1000
    * 依赖的交易 1 被中止
交易 5 中止原因分析:
  - 交易类型: read
  - 执行时间: 15:41:15.668417
  - 读取的值: 1002
  - 可能的中止原因:
    * 交易 0 在此交易执行期间写入了新值 1000
    * 交易 2 在此交易执行期间写入了新值 1002
    * 读取了交易 0 的旧版本，但该版本已被交易 2 覆盖
    * 依赖的交易 3 被中止
    * 依赖的交易 4 被中止
    * 依赖的交易 2 被中止
    * 依赖的交易 1 被中止
交易 1 中止原因分析:
  - 交易类型: read
  - 执行时间: 15:41:15.647270
  - 读取的值: 100
  - 可能的中止原因:
    * 交易 0 在此交易执行期间写入了新值 1000
交易 7 中止原因分析:
  - 交易类型: read
  - 执行时间: 15:41:15.683511
  - 读取的值: 1000
  - 可能的中止原因:
    * 交易 0 在此交易执行期间写入了新值 1000
    * 交易 2 在此交易执行期间写入了新值 1002
    * 交易 6 在此交易执行期间写入了新值 1006
    * 读取了交易 2 的旧版本，但该版本已被交易 6 覆盖
    * 读取了交易 0 的旧版本，但该版本已被交易 2 覆盖
    * 读取了交易 0 的旧版本，但该版本已被交易 6 覆盖
    * 依赖的交易 3 被中止
    * 依赖的交易 4 被中止
    * 依赖的交易 2 被中止
    * 依赖的交易 5 被中止
    * 依赖的交易 1 被中止

合约最终状态: 1006

执行时间线分析:
  基于开始时间的交易执行顺序:
  1. 交易 0 (线程 1, write) - 开始于: 15:41:15.647270, 结束于: 15:41:15.668417
  2. 交易 1 (线程 3, read) - 开始于: 15:41:15.647270, 结束于: 15:41:15.653306
  3. 交易 2 (线程 4, write) - 开始于: 15:41:15.647270, 结束于: 15:41:15.668417
  4. 交易 3 (线程 2, read) - 开始于: 15:41:15.647270, 结束于: 15:41:15.653306
  5. 交易 5 (线程 3, read) - 开始于: 15:41:15.668417, 结束于: 15:41:15.683511
  6. 交易 6 (线程 1, write) - 开始于: 15:41:15.683511, 结束于: 15:41:15.699137
  7. 交易 7 (线程 4, read) - 开始于: 15:41:15.683511, 结束于: 15:41:15.699137

线程执行分析:
  线程 1:
    执行交易数: 2
    总执行时间: 51 ms
  线程 3:
    执行交易数: 2
    总执行时间: 36 ms
  线程 4:
    执行交易数: 2
    总执行时间: 51 ms
  线程 2:
    执行交易数: 1
    总执行时间: 6 ms

测试完成!
